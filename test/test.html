<html>
	<head>
		<script type="text/javascript" src="../dist/zpipe.min.js"></script>

		<script>
			var time;

			function start() {
				time = new Date().getTime();
			};

			function checkpoint(label) {
				var delta = (new Date().getTime() - time) / 1000;

				console.log(label, delta, "msec" );

				time = new Date().getTime();

				return delta;
			};
		</script>

		<script>
			var data = "Experiments With Alternating Currents of Very High Frequency, and Their Application to Methods of Artificial Illumination";

			for(var i = 0; i < 10; i++) {
				data += data;
			}

			console.log('nBytes:', data.length);

			start();

			var deflated = zpipe.deflate(data);

			var delta = checkpoint("benchmark deflate:");

			console.log(data.length / (1024 * 1024) / delta, "MB/s");

			var inflated = zpipe.inflate(deflated);

			var delta = checkpoint("benchmark inflate:");

			console.log(data.length / (1024 * 1024) / delta, "MB/s");

			console.log("deflated / inflated", deflated.length / inflated.length);

			console.log("Test passed: ", inflated == data);
		</script>
	</head>
	<body>
	</body>
</html>
